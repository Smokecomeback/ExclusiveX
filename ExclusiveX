function get(length) {
  let result = '';
  const crg = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';
  const cr = crg.length;
  for (let i = 0; i < length; i++) {
    result += crg.charAt(Math.floor(Math.random() * cr));
  }
  return result;
}

let token = localStorage.getItem('token');

if (!token) {
  token = get(32);
  localStorage.setItem('token', token);
}

const autorized = ['KgsY2tro7r1wRCxfasSBMx0HXbQ13ew7', 'JXu7C67mVm9svB2DoGpW442PNBODx6VQ', 'oTCDZh3gjNC9MZPlCnz7Dt6QYukS4m99', 'YTTncrhPgEXba3L4mjOXXoD6xJ5tGrNs', '7jmVyhPLgjVUHIpOIqV9fxhSzkEwES0i', '9kcCQrym1c1P2N2B3dInGbUllJNN1hSm', 'CnuXZG7wyphwRbtK3pcw3TRv136DDlcb', 'pYyUdJVhvi0A4JOXbuYXAd0PAfFPoDxN', '3DOJ6YVHghtjnHNo2UPvfawXrJ4Zhgpc', 'IPO7fXUz51d5jLm4zQw7nfAhh1JDUfiZ', 'YOEAR1KLi1PCNF8wUnYEteGCJZ2uyJTz', 'V0ABbpV0pc4A6IDoRgq4LCdWThke26o7', 'Ks8hIWihCKj2DAbveatwqBXAKPGDcOkF', 'v4YyF0sic9LgNAJakKVRSyu1QVUcLjFi', 'G1UrElkUlw1AaSWX2KEfwYLecrDvNjk3', 'ZfPU74UoJk1yeeo9piL1dnzaSsaRzl6F', 'Tgxr1qo4Kd2azGoStlHqsb0YGYrrYOOj', 'xHWqHpUjrRT8yu2OGrzw6VgLzpcE2zNT', 'SB8eR2CvOWqcS4n1QN051arPNidpZBpx', 'DYKghctCbzud4AkF2CS7Ao5eJ75K7jtB', '9nHgP4mV2Tgn5wTTksR2k1dc7lzKzFhA', 'KSdVDmJqZc8pifZenVTwg5E0azhrQAb3', 'kPPpeIKVqClGIkO9WQmzdm6UMZ4mGEcn', 'yT6rdDgm6Blh6tg54sILKESvDGNbc5Sf', 'other'];

if (autorized.includes(token)) {
    console.log("Running");
} else {
    alert('token: ' + token);
    secure();
}

function tm() {
    let ctt = localStorage.getItem('ctt');
    if (ctt === null) {
        ctt = 0;
    } else {
        ctt = parseInt(ctt);
    }
    return ctt;
}

function secure() {
    var k = document.querySelectorAll('*');
    for(var i = 0; i < k.length; i++) {
        k[i].remove();
    }
}

function upd() {
    const setTimer = false;

    if (!setTimer) {
        return;
    }

    let ctt = tm();

    let interval = setInterval(() => {
        ctt++;
        localStorage.setItem('ctt', ctt);

        if (ctt >= 1 && setTimer) {
            clearInterval(interval);
            alert('an error ocured');
            secure();
        }
    }, 1000);
}
upd();
